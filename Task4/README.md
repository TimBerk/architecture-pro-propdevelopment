# Задание 4. Защита доступа к кластеру Kubernetes

В этом задании вы поработаете над решением технической задачи. Вам необходимо организовать ролевой доступ к Kubernetes для пользователей кластера.

Вот контекст и факты о ролевой модели:
* Большинство бизнес-сервисов разворачивается в среде Kubernetes. Необходимо ограничить доступ к управлению кластером для различных групп пользователей.
* Необходимо защитить кластер с помощью предоставления привилегированных действий (например, просмотра секретов) для определённых групп пользователей.
* Кроме привилегированных групп пользователей, необходимо выделить ещё минимум две группы пользователей. У первой группы есть право только на просмотр ресурсов кластера. Вторая другая группа пользователей может настраивать кластер.
* Необходимо разграничить доступ к ресурсам кластера, исходя из организационной структуры компании.

## Что нужно сделать

1. Поднимите пустой Minikube. В этот раз вы будете работать без тестового приложения. Изучать код не нужно, поэтому сфокусируйтесь на подготовке скриптов. Они должны будут отражать решения, которые получились у вас по итогу работы над первыми тремя заданиями. Для этого вам понадобится пустой Minikube.
2. Определите все роли и их полномочия при работе с Kubernetes. Мы подготовили шаблон таблицы. Заполните её: укажите там роли, их полномочия и группы пользователей, которые им соответствуют.
3. Подготовьте скрипты для создания пользователей. Рекомендуем создать не менее двух пользователей.
4. Подготовьте скрипты, чтобы создать роли. Они должны соответствовать ролям из вашей таблицы.
5. Подготовьте скрипты, чтобы связать пользователей с ролями. 

## Отчёт

Таблица с ролями и группами пользователей:

| Роль      | Права роли                                                                                                      | Группы пользователей                                         |
|-----------|-----------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
| support   | Кластерный read-only доступ                                                                                     | grp-support (бизнес‑аналитики, аудиторы, support‑read)       |
| developer | Управление ресурсами приложений в заданных namespace. Без доступа к RBAC и секретам.                            | grp-developer (dev/devops для определённых команд и доменов) |
| devops    | Все права ns-developer + secrets, PVC, pod/log, а также возможность рестартов/rollback’ов.                      | grp-devops (старшие DevOps, SRE, on‑call)                    |
| admin     | Полный доступ ко всем ресурсам кластера (аналог cluster-admin): * во всех группах, включая RBAC и node‑ресурсы. | grp-admin (ядро платформенной команды)                       |

Для создания пользователей используется скрипт: `create-users.sh`
Для создания ролей и их привязки используется скрипт: `apply-rbac.sh`

